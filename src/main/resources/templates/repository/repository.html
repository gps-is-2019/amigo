<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>

    <head th:include="/fragments/fragments.html :: head">
        <title id="pageTitle">Amigo| Repository</title>
    </head>
</head>
<body>
<div th:insert="fragments/fragments.html :: header"></div>
<h1 class="ui header" align="center">Repository d'Ateneo</h1>
    <div class="ui main text container">
        <div class="ui message success" th:if="${addFlag==true}">
            <i class="close icon"></i>
            <p>Documento <span th:text="${documentoNome}"></span> caricato con successo!</span></p>
        </div>

        <div class="ui error message" th:if="${addFlag==false}">
            <i class="close icon"></i>
            <p>Documento non caricato!</span></p>
        </div>

        <div class="ui search">
            <div class="ui icon input">
                <form action="/repository">
                    <input class="prompt" type="text" placeholder="Inserisci nome..." name="name">
                    <button type="submit" name="submit" class="ui basic button">
                        <i class="search icon"></i>
                    </button>
                </form>

            </div>
        </div>


        <table class="ui celled table striped">
            <tbody>
                <tr class="center aligned">
                    <td th:if="${#lists.isEmpty(documenti)}">
                        <span>Non sono presenti documenti in repository.</span>
                    </td>
                </tr>
                <tr class="center aligned" th:if="${#lists.isEmpty(documenti)==false}" >
                    <th>Nome</th>
                    <th>Data di caricamento</th>
                </tr>
                <th:block th:each="documento : ${documenti}">
                    <tr class="center aligned">
                        <td>
                            <a target=”_blank” th:href="@{'/repository/{idDocumento}' ( idDocumento=${documento.id})}">
                                <span th:text="${documento.nome}"></span>
                            </a>
                        </td>
                        <td>
                            <span th:text="${documento.dataInvio}"></span>
                        </td>
                    </tr>
                </th:block>
            </tbody>
        </table>

        <a th:if="${flagPQA==1}" class="ui primary button"
           href="/repository/uploadDocumento">
            Aggiungi
        </a>
    </div>

<script>$('.message .close')
    .on('click', function () {
        $(this)
            .closest('.message')
            .transition('fade')
        ;
    })
;</script>
</body>
</html>